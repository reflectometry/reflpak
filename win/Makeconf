ARCH=win

topdir=$(shell pwd -W | sed -e 's,^.:,,')
drive=C:

# Debugging statements?
# DEBUG=-DEBUG

# Things from tclConfig.sh
#TCL_PREFIX=/Tcl
#TCL_INCLUDE_SPEC=-I$(drive)$(TCL_PREFIX)/include
#TCL_STUB_LIB_SPEC=-L$(drive)$(TCL_PREFIX)/lib -ltclstub84
TCL_STUB_LIB_SPEC=-ltclstub84
TK_STUB_LIB_SPEC=-ltkstub84
TCL_SHLIB_LD=gcc -pipe -shared
TCL_SHLIB_SUFFIX=.dll
WISH=/c$(TCL_PREFIX)/bin/bltwish.exe

# Tcl packages we need to include
TKCON=$(TCL_PREFIX)/lib/tkcon.tcl
OCTAVE=$(TCL_PREFIX)/lib/octave0.1
BWIDGET=$(TCL_PREFIX)/lib/bwidget1.6
TKDND=$(TCL_PREFIX)/lib/tkdnd1.0
TKDND_EXT=libtkdnd10.dll
TKTABLE=$(TCL_PREFIX)/lib/Tktable2.8
TKTABLE_EXT=Tktable28.dll

# Fortran compiler
F77=g77
FFLAGS=-O3
FLIBS=-lg2c -lm
FPP=-x f77-cpp-input

# C compiler
CC=gcc
CXX=g++
CFLAGS=-O2 -Wall $(TCL_INCLUDE_SPEC)
LIBS:=$(TK_STUB_LIB_SPEC) $(TCL_STUB_LIB_SPEC) $(FLIBS)
LD=$(CC) -pipe -shared
LD_CXX=$(CXX) -pipe -shared
LDFLAGS=
EXE=.exe
LDEXT=$(TCL_SHLIB_SUFFIX)

# Open GL + Togl
# You will need to find glut.h and glut32.dll to run the
# simple plot test which does not use Togl or Tcl/Tk.  I
# put glut32.dll in the current directory and glut.h in
# the /mingw/include/GL directory.
GLDEF = -DTOGL_WGL
GLINC = 
GLLIBS = -lglu32 -lopengl32 -lgdi32
GLUTINC = 
GLUTLIBS = -lglut32

OS = $(shell uname -s)
ifeq ($(OS),CYGWIN_NT-5.0)
  GLINC = -I/usr/include/w32api
endif

# NeXus
HDF5 = -L/c/home/pkienzle/hdf5/lib -lhdf5 -lwsock32
HDF4 = -L/c/home/pkienzle/hdf/lib -lhd421 -llibjpeg -lszlib -lz
NEXUS = /c/home/pkienzle/src/nexus
NEXUSINC = -I$(NEXUS)/include
NEXUSLIB = -L$(NEXUS)/src/.libs -lNeXus $(HDF5) $(HDF4)
